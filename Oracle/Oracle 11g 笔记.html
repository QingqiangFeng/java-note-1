<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Oracle 11g 笔记.md</title><link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left: 1px solid black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left: 1px solid silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background: rgb(119, 238, 119); z-index: 1; }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-size: 1rem; font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left: 3px solid rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background: rgba(204, 204, 204, 0.2); }
.cm-s-typora-default .CodeMirror-gutters { border-right: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: "•"; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: " "; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: "↓"; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background: rgb(217, 217, 217); }
.CodeMirror-focused .CodeMirror-selected { background: rgb(215, 212, 240); }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
.CodeMirror span { }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat-x; }
.CodeMirror-lint-mark-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { background-position: center center; background-repeat: no-repeat; cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-multiple { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"); background-repeat: no-repeat; background-position: right bottom; width: 100%; height: 100%; }


html { font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { background: rgb(181, 214, 252); text-shadow: none; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
#write li > table:first-child { margin-top: -20px; }
img { max-width: 100%; vertical-align: middle; }
input, button, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-radius: 4px; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print {
  html, body { height: 100%; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { break-after: avoid-page; orphans: 2; }
  p { orphans: 4; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0mm; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
.md-tag { opacity: 0.5; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background: transparent !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }


@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 4px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border-width: 0px 0px 1px; border-style: none none solid; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; overflow: hidden; box-sizing: content-box; border-bottom-color: rgb(221, 221, 221); }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(204, 204, 204); background-color: white; margin: 0px; padding: 0px; }
table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); }
.md-fences, code, tt { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.task-list { padding-left: 0px; }
.task-list-item { padding-left: 32px; }
.task-list-item input { top: 3px; left: 8px; }
@media screen and (min-width: 914px) {
}
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border: 1px solid rgb(221, 221, 221); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; color: inherit; }
.md-tag { color: inherit; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
#md-notification::before { top: 10px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.117647); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }






</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a>Oracle 11g 笔记</h1><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n0">Oracle 11g 笔记</a></span><span class="md-toc-item md-toc-h2" data-ref="n3"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n3">1. Oracle 11g 安装</a></span><span class="md-toc-item md-toc-h2" data-ref="n31"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n31">2. Oracle的逻辑结构</a></span><span class="md-toc-item md-toc-h3" data-ref="n40"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n40">2.01 表空间</a></span><span class="md-toc-item md-toc-h3" data-ref="n55"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n55">2.02 段</a></span><span class="md-toc-item md-toc-h3" data-ref="n74"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n74">2.03 区</a></span><span class="md-toc-item md-toc-h3" data-ref="n93"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n93">2.04 数据块</a></span><span class="md-toc-item md-toc-h2" data-ref="n102"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n102">3. SQL语句</a></span><span class="md-toc-item md-toc-h3" data-ref="n103"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n103">3.01 SQL语句分为三类:DML、DDL、DCL</a></span><span class="md-toc-item md-toc-h3" data-ref="n188"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n188">3.02 组函数</a></span><span class="md-toc-item md-toc-h4" data-ref="n193"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n193">max</a></span><span class="md-toc-item md-toc-h4" data-ref="n195"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n195">min</a></span><span class="md-toc-item md-toc-h4" data-ref="n197"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n197">avg</a></span><span class="md-toc-item md-toc-h4" data-ref="n199"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n199">sum</a></span><span class="md-toc-item md-toc-h4" data-ref="n201"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n201">count</a></span><span class="md-toc-item md-toc-h3" data-ref="n205"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n205">3.03 group by 语句</a></span><span class="md-toc-item md-toc-h3" data-ref="n213"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n213">3.04 having 语句</a></span><span class="md-toc-item md-toc-h3" data-ref="n217"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n217">3.05 order by 语句</a></span><span class="md-toc-item md-toc-h3" data-ref="n245"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n245">3.06 SQL 1999</a></span><span class="md-toc-item md-toc-h3" data-ref="n252"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n252">3.07 导入与导出命令</a></span><span class="md-toc-item md-toc-h3" data-ref="n263"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n263">3.08 创建用户，给用户权限</a></span><span class="md-toc-item md-toc-h3" data-ref="n267"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n267">3.09 插入数据</a></span><span class="md-toc-item md-toc-h3" data-ref="n271"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n271">3.10 rownum</a></span><span class="md-toc-item md-toc-h3" data-ref="n325"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n325">3.11 update 更新</a></span><span class="md-toc-item md-toc-h3" data-ref="n329"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n329">3.12 delete 删除</a></span><span class="md-toc-item md-toc-h3" data-ref="n333"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n333">3.13 create table 创建表，约束</a></span><span class="md-toc-item md-toc-h3" data-ref="n364"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n364">3.14 drop 删除表</a></span><span class="md-toc-item md-toc-h3" data-ref="n368"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n368">3.15 alter table 修改表结构</a></span><span class="md-toc-item md-toc-h3" data-ref="n372"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n372">3.16 索引</a></span><span class="md-toc-item md-toc-h3" data-ref="n384"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n384">3.17 视图</a></span><span class="md-toc-item md-toc-h3" data-ref="n411"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n411">3.18 序列 (Oracle独有)</a></span><span class="md-toc-item md-toc-h2" data-ref="n419"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n419">4. transaction 事务</a></span><span class="md-toc-item md-toc-h2" data-ref="n433"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n433">5. 数据字典表</a></span><span class="md-toc-item md-toc-h2" data-ref="n452"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n452">6. 三范式</a></span><span class="md-toc-item md-toc-h2" data-ref="n474"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n474">7. PL/SQL</a></span><span class="md-toc-item md-toc-h3" data-ref="n480"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n480">7.01 基本语法</a></span><span class="md-toc-item md-toc-h3" data-ref="n511"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n511">7.02 变量</a></span><span class="md-toc-item md-toc-h4" data-ref="n563"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n563">使用%type属性：</a></span><span class="md-toc-item md-toc-h4" data-ref="n571"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n571">Record(记录)类型</a></span><span class="md-toc-item md-toc-h4" data-ref="n579"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n579">使用%rowtype声明record变量</a></span><span class="md-toc-item md-toc-h3" data-ref="n587"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n587">7.03 PL/SQL块中SQL语句的运用</a></span><span class="md-toc-item md-toc-h4" data-ref="n588"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n588">DML语句</a></span><span class="md-toc-item md-toc-h4" data-ref="n613"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n613">DDL语句</a></span><span class="md-toc-item md-toc-h3" data-ref="n621"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n621">7.04 if 语句</a></span><span class="md-toc-item md-toc-h3" data-ref="n629"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n629">7.05 循环</a></span><span class="md-toc-item md-toc-h3" data-ref="n647"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n647">7.06 错误处理</a></span><span class="md-toc-item md-toc-h3" data-ref="n665"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n665">7.07 cursor游标</a></span><span class="md-toc-item md-toc-h3" data-ref="n689"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n689">7.08 存储过程procedure</a></span><span class="md-toc-item md-toc-h3" data-ref="n730"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n730">7.09 函数function</a></span><span class="md-toc-item md-toc-h3" data-ref="n743"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n743">7.10 触发器 trigger</a></span><span class="md-toc-item md-toc-h3" data-ref="n747"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n747">7.11 树状结构的存储与展示</a></span></p></div><h2><a name='header-n3' class='md-header-anchor '></a>1. Oracle 11g 安装</h2><ul><li><p>默认端口: 1521</p></li><li><p>用浏览器链接oracle: <a href='http://localhost:1158/em'>http://localhost:1158/em</a> (需要启动OracleDBConsoleorcl服务)</p></li><li><p>如果安装时未更改SID则SID为orcl</p></li><li><p>使用OS身份连接: sqlplus / as sysdba</p></li><li><p>修改密码: alter user username identified by password;</p><p>密码一般设置为: 超级管理员:sys  密码:sys</p><p>​			     普通管理员:system  密码:manager</p><p>​			     普通用户:scott  密码:tiger</p></li><li><p>解锁scott用户: alter user scott account unlock;</p></li></ul><p></p><h2><a name='header-n31' class='md-header-anchor '></a>2. Oracle的逻辑结构</h2><ul><li>Oracle的逻辑结构包括表空间(tablespace)，段(segment)，区(extent)，数据块(data block)</li><li>oracle数据库在逻辑上是由多个表间组成的，表空间中存储的对象叫段，比如数据段，索引段，和回退段。段由区组成，区是磁盘分配的最小单位。段的增大是通过增加区的个数来实现的。每个区的大小是数据块大小的整数倍，区的大小可以不相同；数据块是数据库中最小的I/O单位，同时也是内存数据缓冲区的单位，及数据文件存储空间单位。块的大小由参数DB_BLOCK_SIZE设置，其值应设置为操作系统块大小的整数倍。</li></ul><h3><a name='header-n40' class='md-header-anchor '></a>2.01 表空间</h3><ul><li>表空间是Oracle数据库最大的逻辑结构，一个Oracle数据库在逻辑上由多个表空间组成，一个表空间只隶属于一个数据库。</li><li>Oracle中有一个称为SYSTEM的表空间，这个表空间是在创建或安装数据库时自动创建的。主要用于存储系统的数据字典，过程，函数，触发器等；也可以存储用户的表，索引等。</li><li>一个表空间可以有多数据文件，但是一个数据文件只能属于一个表空间。</li><li>一个表空间就是一片磁盘区域,他由一个或者多个磁盘文件组成,一个表空间可以容纳许多表、索引或者簇等。每个表空间有一个预制的磁盘区域称为初始区间（initial   extent）用完这个区间后再用下一个，直到用完表空间，这时候需要对表空间进行扩展，增加数据文件或者扩大已经存在的数据文件</li></ul><h3><a name='header-n55' class='md-header-anchor '></a>2.02 段</h3><ul><li><p>Oracle中的段可以分成4种类型：数据段、索引段、回滚段、临时段。</p><ul><li>数据段用来存储用户的数据，每个表都有一个对应的回滚段，其名称和数据表的名字相同。</li><li>索引段用来存储系统、用户的索引信息。</li><li>回滚段用来存储用户数据修改前的值，回退段与事务是一对多的关系，一个事务只能使用一个回退段，而一个回退段可存放一个或多个事务的回退数据。</li><li>临时段用于order by语句的排序以及一些汇总。</li></ul></li></ul><h3><a name='header-n74' class='md-header-anchor '></a>2.03 区</h3><ul><li><p>区是磁盘空间分配的最小单位。磁盘按区划分，每次至少分配一个区。</p></li><li><p>区存储于段中，它由连续的数据块组成。</p></li><li><p>区的分配过程中，每次至分配5个区。如果所剩的空闲空间不够5个区，就会出现错误：ORA-01653。</p></li><li><p>可以通过字典dba_tablespaces查询表空间中区的信息。可以通过字典user_tables查询段中区的信息。可以通过字典user_extents查询区的分配状况。</p></li><li><p>我们可以通过以下SQL语句分别查询表空间、段、区中区的分配信息:</p><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure">AخA</div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> dba_tablespaces;  <span class="cm-comment">/*查询表空间中区的分配信息*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> table_name, tablespace_name, min_extents, max_extents <span class="cm-keyword">from</span> user_tables;  <span class="cm-comment">/*查询段空间中区的分配信息*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> user_extents;  <span class="cm-comment">/*查询区中区的分配信息*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre></li></ul><h3><a name='header-n93' class='md-header-anchor '></a>2.04 数据块</h3><ul><li>数据块是数据中中最小的数据组织单位与管理单位，是数据文件磁盘存储空间单位，也是数据库I/O 的最小单位，数据块大小由DB_BLOCK_SIZE参数决定，不同的oracle版本DB_BLOCK_SIZE的默认值是不同的。</li><li>Oracle 11g 的DB_BLOCK_SIZE默认值为8192(8K)</li></ul><h2><a name='header-n102' class='md-header-anchor '></a>3. SQL语句</h2><h3><a name='header-n103' class='md-header-anchor '></a>3.01 SQL语句分为三类:DML、DDL、DCL</h3><ul><li><p>DML(Data Manipulation Language): 数据操作语言，SQL中处理数据等操作统称为数据操纵语言</p><ul><li><p>SELECT - retrieve data from the a database 查询</p></li><li><p>INSERT - insert data into a table 添加</p></li><li><p>UPDATE - updates existing data within a table 更新</p></li><li><p>DELETE - deletes all records from a table, the space for the records remain 删除</p></li><li><p>CALL - call a PL/SQL or Java subprogram</p></li><li><p>EXPLAIN PLAIN - explain access path to data</p><p>Oracle RDBMS执行每一条SQL语句，都必须经过Oracle优化器的评估。所以，了解优化器是如何选择(搜索)路径以及索引是如何被使用的，对优化SQL语句有很大的帮助。Explain可以用来迅速方便地查出对于给定SQL语句中的查询数据是如何得到的即搜索路径(我们通常称为Access Path)。从而使我们选择最优的查询方式达到最大的优化效果。</p></li><li><p>LOCK TABLE - control concurrency 锁，用于控制并发</p></li></ul></li><li><p>DDL(Data Definition Language): 数据定义语言，用于定义和管理 SQL数据库中的所有对象的语言</p><ul><li><p>CREATE - to create objects in the database 创建</p></li><li><p>ALTER - alters the structure of the database 修改</p></li><li><p>DROP - delete objects from the database 删除</p></li><li><p>TRUNCATE - remove all records from a table, including all spaces allocated for the records are removed - 删除整张表</p><p>使用方法: truncate table 表名</p><p>truncate速度快,而且效率高,因为:</p><p>TRUNCATE TABLE 在功能上与不带 WHERE 子句的 DELETE 语句相同：二者均删除表中的全部行。但 TRUNCATE TABLE 比 DELETE 速度快，且使用的系统和事务日志资源少。</p><p>DELETE 语句每次删除一行，并在事务日志中为所删除的每行记录一项。TRUNCATE TABLE 通过释放存储表数据所用的数据页来删除数据，并且只在事务日志中记录页的释放。</p><p>TRUNCATE TABLE 删除表中的所有行，但表结构及其列、约束、索引等保持不变。新行标识所用的计数值重置为该列的种子。如果想保留标识计数值，请改用 DELETE。如果要删除表定义及其数据，请使用 DROP TABLE 语句。</p><p>对于由 FOREIGN KEY 约束引用的表，不能使用 TRUNCATE TABLE，而应使用不带 WHERE 子句的 DELETE 语句。由于 TRUNCATE TABLE 不记录在日志中，所以它不能激活触发器。</p><p>TRUNCATE TABLE 不能用于参与了索引视图的表。</p></li><li><p>COMMENT - add comments to the data dictionary 注释</p></li><li><p>GRANT - gives user&#39;s access privileges to database 授权</p></li><li><p>REVOKE - withdraw access privileges given with the GRANT command 收回已经授予的权限</p></li></ul></li><li><p>DCL(Data Control Language): 数据控制语言，用来授予或回收访问数据库的某种特权，并控制数据库操纵事务发生的时间及效果，对数据库实行监视等</p><ul><li>COMMIT - save work done 提交</li><li>SAVEPOINT - identify a point in a transaction to which you can later roll back 保存点</li><li>ROLLBACK - restore database to original since the last COMMIT 回滚</li><li>SET TRANSACTION - Change transaction options like what rollback segment to use 设置当前事务的特性，它对后面的事务没有影响</li></ul></li></ul><h3><a name='header-n188' class='md-header-anchor '></a>3.02 组函数</h3><ul><li>把多条记录作为输入最后产生一个输出</li></ul><h4><a name='header-n193' class='md-header-anchor '></a>max</h4><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> max(sal) <span class="cm-keyword">from</span> emp;  <span class="cm-comment">/*sal的最大值*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h4><a name='header-n195' class='md-header-anchor '></a>min</h4><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> min(sal) <span class="cm-keyword">from</span> emp; <span class="cm-comment">/*sal的最小值*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h4><a name='header-n197' class='md-header-anchor '></a>avg</h4><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> avg(sal) <span class="cm-keyword">from</span> emp;  <span class="cm-comment">/*sal的平均值*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h4><a name='header-n199' class='md-header-anchor '></a>sum</h4><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> sum(sal) <span class="cm-keyword">from</span> emp;  <span class="cm-comment">/*sal的总和*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h4><a name='header-n201' class='md-header-anchor '></a>count</h4><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">count</span>(*) <span class="cm-keyword">from</span> emp;  <span class="cm-comment">/*这张表中非空行数*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">count</span>(*) <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> deptno = <span class="cm-number">10</span>;  <span class="cm-comment">/*deptno=10的行数*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">count</span>(comm) <span class="cm-keyword">from</span> emp;  <span class="cm-comment">/*这张表中comm非空的行数*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p></p><h3><a name='header-n205' class='md-header-anchor '></a>3.03 group by 语句</h3><ul><li>当语句中有where语句和group by语句时，会先执行where语句，在where选取出的结果中进行分组</li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> avg(sal) <span class="cm-keyword">from</span> emp group <span class="cm-keyword">by</span> deptno;  <span class="cm-comment">/*把deptno值相同的分为一组，求每一组的sal的平均数*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> max(sal) <span class="cm-keyword">from</span> emp group <span class="cm-keyword">by</span> deptno, job;  <span class="cm-comment">/*把deptno和job都相同的分为一组，求每一组的sal的最大值*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p></p><h3><a name='header-n213' class='md-header-anchor '></a>3.04 having 语句</h3><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> avg(sal) <span class="cm-keyword">from</span> emp group <span class="cm-keyword">by</span> deptno <span class="cm-keyword">having</span> avg(sal) &gt; <span class="cm-number">2000</span>;  <span class="cm-comment">/*按照deptno分组后，求出sal的平均数大于2000的组的sal的平均数*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p></p><h3><a name='header-n217' class='md-header-anchor '></a>3.05 order by 语句</h3><ul><li>asc: 升序(默认)</li><li>desc: 降序</li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap  "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,sal <span class="cm-keyword">from</span> emp <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> sal <span class="cm-keyword">desc</span>;  <span class="cm-comment">/*按照sal的值降序输出</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><ul><li><p>Oracle在order by时认为null是最大值，所以如果是ASC升序则排在最后，DESC降序则排在最前。可以使用nulls first 或者nulls last 语法来控制NULL的位置</p><ul><li><p>如果Order by 中指定了表达式Nulls first则表示null值的记录将排在最前(不管是asc 还是 desc)</p></li><li><p>如果Order by 中指定了表达式Nulls last则表示null值的记录将排在最后 (不管是asc 还是 desc)</p></li><li><p>语法如下</p><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp2 <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> sal nulls first;</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp2 <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> sal nulls last;</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre></li></ul></li><li><p><strong>注意：order by一般不在子查询中使用，因为这么做没有实际意义，即使用了数据库系统也不会在子查询中进行order by操作，因为它也觉得这么做没有必要；但是在和rownum一起使用时，子查询的结果会影响到最终返回的结果集，在这种情况下，order by必须写在子查询中</strong></p></li></ul><p></p><h3><a name='header-n245' class='md-header-anchor '></a>3.06 SQL 1999</h3><ul><li>SQL 1999的思想: where语句中只写数据过滤条件，不写表的连接条件</li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/*交叉连接*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname <span class="cm-keyword">from</span> emp,dept;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname <span class="cm-keyword">from</span> emp cross <span class="cm-keyword">join</span> dept;  <span class="cm-comment">/*cross join意思就是交叉连接*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/*等价连接*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname <span class="cm-keyword">from</span> emp,dept <span class="cm-keyword">where</span> emp<span class="cm-variable-2">.deptno</span>=dept<span class="cm-variable-2">.deptno</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname <span class="cm-keyword">from</span> emp <span class="cm-keyword">join</span> dept <span class="cm-keyword">on</span> (emp<span class="cm-variable-2">.deptno</span> = dept<span class="cm-variable-2">.dept</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname <span class="cm-keyword">from</span> emp <span class="cm-keyword">join</span> dept using(deptno);  <span class="cm-comment">/*不推荐使用*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/*非等值连接*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,grade <span class="cm-keyword">from</span> emp e <span class="cm-keyword">join</span> salgrade s <span class="cm-keyword">on</span> (e<span class="cm-variable-2">.sal</span> <span class="cm-keyword">between</span> s<span class="cm-variable-2">.losal</span> <span class="cm-keyword">and</span> s<span class="cm-variable-2">.hisal</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname,grade </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> emp e </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">join</span> dept d <span class="cm-keyword">on</span>(e<span class="cm-variable-2">.deptno</span> = d<span class="cm-variable-2">.deptno</span>) </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">join</span> salgrade s <span class="cm-keyword">on</span> (e<span class="cm-variable-2">.sal</span> <span class="cm-keyword">between</span> s<span class="cm-variable-2">.losal</span> <span class="cm-keyword">and</span> s<span class="cm-variable-2">.hisal</span>) </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">where</span> ename <span class="cm-keyword">not</span> <span class="cm-keyword">like</span> <span class="cm-string">'_A%'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/*自连接*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> e1<span class="cm-variable-2">.ename</span>,e2<span class="cm-variable-2">.ename</span> <span class="cm-keyword">from</span> emp e1 <span class="cm-keyword">join</span> emp e2 <span class="cm-keyword">on</span> (e1<span class="cm-variable-2">.mgr</span> = e2<span class="cm-variable-2">.empno</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/*外连接*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> e1<span class="cm-variable-2">.ename</span>,e2<span class="cm-variable-2">.ename</span> <span class="cm-keyword">from</span> emp e1 left <span class="cm-keyword">join</span> emp e2 <span class="cm-keyword">on</span>(e1<span class="cm-variable-2">.mgr</span> = e2<span class="cm-variable-2">.empno</span>);  <span class="cm-comment">/*left join意思是左外连接，左外连接会把左边这张表(e1)中多余的数据(不能和另外一张表产生连接的数据)取出*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname <span class="cm-keyword">from</span> emp e right <span class="cm-keyword">join</span> dept d <span class="cm-keyword">on</span> (e<span class="cm-variable-2">.deptno</span> = d<span class="cm-variable-2">.deptno</span>);  <span class="cm-comment">/*right join意思是右外连接*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/*全外连接，sql 1999 才得以实现，可把左右两表中多余的数据都取出来*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename,dname <span class="cm-keyword">from</span> emp e full <span class="cm-keyword">join</span> dept d <span class="cm-keyword">on</span> (e<span class="cm-variable-2">.deptno</span> = d<span class="cm-variable-2">.deptno</span>);  <span class="cm-comment">/*full join意思为全外连接*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 667px;"></div></div></div></pre><h3><a name='header-n252' class='md-header-anchor '></a>3.07 导入与导出命令</h3><ul><li>exp命令用于把数据从远程数据库服务器导出至本地,生成dmp文件</li><li>imp命令用于把本地的数据库dmp文件从本地导入到远程的Oracle数据库中</li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">exp <span class="cm-comment">/*导出xx用户(或表)，会导出.dmp文件到当前文件夹*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;">imp <span class="cm-comment">/*从.dmp文件选择内容导入到xx用户*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p></p><h3><a name='header-n263' class='md-header-anchor '></a>3.08 创建用户，给用户权限</h3><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> user ryoukai identified <span class="cm-keyword">by</span> ryoukai default tablespace users quota <span class="cm-number">10</span>M <span class="cm-keyword">on</span> users;  <span class="cm-comment">/*创建用户名为ryoukai，密码为ryoukai的用户，在默认的表空间users中分配10M空间给ryoukai用户*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;">grant <span class="cm-keyword">create</span> session, <span class="cm-keyword">create</span> teble, <span class="cm-keyword">create</span> view to ryoukai;  <span class="cm-comment">/*为新用户ryoukai赋予权限，create session为登录权限*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p></p><h3><a name='header-n267' class='md-header-anchor '></a>3.09 插入数据</h3><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> dept <span class="cm-keyword">values</span>(<span class="cm-number">50</span>, <span class="cm-string">'game'</span>, <span class="cm-string">'beijing'</span>);</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> dept(deptno, dname, loc) <span class="cm-keyword">values</span>(<span class="cm-number">50</span>, <span class="cm-string">'game'</span>, <span class="cm-string">'beijing'</span>);<span class="cm-tab"> </span><span class="cm-comment">/*推荐写法*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p></p><h3><a name='header-n271' class='md-header-anchor '></a>3.10 rownum</h3><ul><li><p>例:</p><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> empno, ename <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> rownum &lt;= <span class="cm-number">5</span>;  <span class="cm-comment">/*从emp表中选取empno和ename，再从选取的结果中选取前5条*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre></li></ul><ul><li><p>rownum机制:</p><ol start='' ><li>Oracle executes your query.</li><li>Oracle fetches the first row and calls it row number 1.</li><li>Have we gotten past row number meets the criteria? If no, then Oracle discards the row, If yes, then Oracle return the row.</li><li>Oracle fetches the next row and advances the row number (to 2, and then to 3, and then to 4, and so forth).</li><li>Go to step 3.</li></ol></li></ul><ul><li><p>rownum是oracle系统按顺序分配的从查询返回的行的编号，返回的第一行分配的是1，第二行是2，依此类推，这个伪字段可以用于限制查询返回的总行数，而且rownum不能以任何表的名称作为前缀</p></li><li><p>rownum只能和 &lt; 或 &lt;= 或 != 一起用，!= 的效果和 &lt; 一样</p><ul><li><p>如果希望找到表中第一信息，可以使用rownum=1作为条件。但是想找到表中第二条信息，使用rownum=2结果查不到数据。因为rownum都是从1开始，但是1以上的自然数在rownum做等于判断是时认为都是false条件，所以无法查到rownum = n（n&gt;1的自然数）</p></li><li><p>如果想找到从第二行记录以后的记录，当使用rownum&gt;2是查不出记录的，原因是由于rownum是一个总是从1开始的伪列，Oracle 认为rownum&gt; n(n&gt;1的自然数)这种条件依旧不成立，所以查不到记录</p></li><li><p>那如何才能找到第二行以后的记录呀。可以使用以下的子查询方法来解决。注意子查询中的rownum必须要有别名，否则还是不会查出记录来，这是因为rownum不是某个表的列，如果不起别名的话，无法知道rownum是子查询的列还是主查询的列</p><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> rownum r, ename <span class="cm-keyword">from</span> emp) <span class="cm-keyword">where</span> r &gt; <span class="cm-number">10</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li></ul></li><li><p>rownum与排序</p><ul><li><p>Oracle中的rownum是在select取数据的时候就产生了序号，需要注意</p><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename, sal <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> rownum &lt;= <span class="cm-number">5</span> <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> sal <span class="cm-keyword">desc</span>;  <span class="cm-comment">/*首先选取出ename和sal，同时rownum已产生，所以后面的order by排序是将已选取的前五行数据排序，而不是所有数据排序再选出前五行*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ename, sal <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> ename, sal <span class="cm-keyword">from</span> emp <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> sal <span class="cm-keyword">desc</span>) <span class="cm-keyword">where</span> rownum &lt;= <span class="cm-number">5</span>;  <span class="cm-comment">/*使用子查询以达到先排序，再取出前五行的目的*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre></li></ul></li></ul><p></p><h3><a name='header-n325' class='md-header-anchor '></a>3.11 update 更新</h3><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">update</span> emp <span class="cm-keyword">set</span> sal = sal * <span class="cm-number">2</span> <span class="cm-keyword">where</span> deptno = <span class="cm-number">10</span>;  <span class="cm-comment">/*更新表emp中内容，把deptno=10的每行中的sal改为原来的两倍*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p></p><h3><a name='header-n329' class='md-header-anchor '></a>3.12 delete 删除</h3><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> emp;  <span class="cm-comment">/*删除emp中所有行*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> dept <span class="cm-keyword">where</span> deptno = <span class="cm-number">10</span>;  <span class="cm-comment">/*删除表dept中deptno=10的行*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p></p><h3><a name='header-n333' class='md-header-anchor '></a>3.13 create table 创建表，约束</h3><ul><li><p>创建约束: constraint 约束名 约束条件</p></li><li><p>default: 给该字段设置默认值</p></li><li><p>非空约束: not null</p></li><li><p>唯一约束: unique</p><p>唯一约束要求该字段不能有重复的值，但多个null(空值)不认为是重复的值</p></li><li><p>主键约束: primary key</p><p>主键非空且唯一</p></li><li><p>外键约束: foreign key</p><p>外键约束是建立在两个字段上的，某个字段会参考另一个字段上的值，参考的字段的值不能设为被参考的字段没有的值</p><p><strong>被参考字段必须是主键</strong></p></li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t (a varchar2(<span class="cm-number">10</span>));  <span class="cm-comment">/*创建表名为t的表，表中有一个字段，列名为a，数据类型为varchar2(10)(可变字符串，字符串长度最多为10)*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> class</span></pre><pre class=""><span style="padding-right: 0.1px;">(</span></pre><pre class=""><span style="padding-right: 0.1px;">  id number(<span class="cm-number">4</span>) primary key,</span></pre><pre class=""><span style="padding-right: 0.1px;">  name varchar2(<span class="cm-number">20</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> stu</span></pre><pre class=""><span style="padding-right: 0.1px;">(</span></pre><pre class=""><span style="padding-right: 0.1px;">  id number(<span class="cm-number">6</span>) primary key,  <span class="cm-comment">/*给该字段添加主键约束*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  name varchar2(<span class="cm-number">20</span>) constraint stu_name_nn <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,  <span class="cm-comment">/*constraint用于创建约束，stu_name_nn 为约束名，约束条件是不能为空*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  sex number(<span class="cm-number">1</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">  age number(<span class="cm-number">3</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">  sdate <span class="cm-builtin">date</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;">  grade number(<span class="cm-number">2</span>) default <span class="cm-number">1</span>,  <span class="cm-comment">/*default指定默认值为1*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  class number(<span class="cm-number">4</span>) references class(id),  <span class="cm-comment">/*创建外键约束，参考字段为class，被参考字段为表class中的id字段*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  email varchar2(<span class="cm-number">50</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">  constraint stu_name_email_uni unique(email, name)  <span class="cm-comment">/*创建一个表级的约束，约束条件为email和name的组合不能重复*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">/*constraint stu_id_pk primary key(id)  创建表级约束，将id设为该表主键*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">/*constraint stu_class_fk foreign key(class) references class(id)  建立外键，参考字段为class，被参考字段为表class中的id字段*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 621px;"></div></div></div></pre><p></p><h3><a name='header-n364' class='md-header-anchor '></a>3.14 drop 删除表</h3><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">table</span> t;  <span class="cm-comment">/*删除表t*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p></p><h3><a name='header-n368' class='md-header-anchor '></a>3.15 alter table 修改表结构</h3><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> stu add (addr varchar2(<span class="cm-number">100</span>));  //给表stu增加一个字段addr</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> stu <span class="cm-keyword">drop</span> (addr);  //删除表stu的addr字段</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> stu modify (addr varchar2(<span class="cm-number">50</span>));  //修改表stu的addr字段的最大长度为50，若addr字段中有数据超过了50，则不可修改，会报错</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> stu <span class="cm-keyword">drop</span> constraint stu_class_fk;  //删除表stu的约束条件stu_class_fk</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> stu add constraint stu_class_fk foreign key (class) references class(id);  //为表stu增加外键stu_class_fk</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p></p><h3><a name='header-n372' class='md-header-anchor '></a>3.16 索引</h3><ul><li>为某个字段建立索引可提高访问这个字段的数据的效率，但是会减慢修改这个字段的数据的效率，<strong>不要轻易建立索引</strong></li></ul><ul><li>当为一个表的某个字段添加了主键约束或唯一约束，会自动为这个字段添加索引</li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> index idx_stu_email <span class="cm-keyword">on</span> stu (email);  <span class="cm-comment">/*为表stu的email字段建立名为idx_stu_email的索引*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> index idx_stu_email_class <span class="cm-keyword">on</span> stu (email, class);  <span class="cm-comment">/*为表stu的email和class的组合建立索引*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> index idx_stu_email_class;  <span class="cm-comment">/*删除索引*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p></p><h3><a name='header-n384' class='md-header-anchor '></a>3.17 视图</h3><ul><li><p>视图相当于一个子查询，可以简化查询，可对机密数据提供安全保护</p></li><li><p>表结构改变，需要手动修改视图，这会增加维护的支出</p></li><li><p>更新视图的数据，实际是更新原表的数据，但是有时会根据多张表建立视图，视图只有满足下列条件才可更新</p><ul><li>select语句在选择列表中没有聚合函数，也不包含TOP,GROUP BY,UNION(除非视图是分区视图)或DISTINCT子句。聚合函数可以用在FROM子句的子查询中，只要不修改函数返回的值</li><li>select语句的选择列表中没有派生列。派生列是由任何非简单列表达式(使用函数、加法或减法运算符等)所构成的结果集列</li><li>select语句中的FROM子句至少引用一个表。select语句不能只包含非表格格式的表达式(即不是从表派生出的表达式)</li><li>INSERT,UPDATE和DELETE语句在引用可更新视图之前，也必须如上述条件指定的那样满足某些限制条件。只有当视图可更新，并且所编写的UPDATE或INSERT语句只修改视图的FROM子句引用的一个基表中的数据时，UPDATE和INSERT语句才能引用视图。只有当视图在其FROM子句中只引用一个表时，DELETE语句才能引用可更新的视图</li></ul></li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> view v$_stu <span class="cm-keyword">as</span> <span class="cm-keyword">select</span> id, name, age <span class="cm-keyword">from</span> stu;  <span class="cm-comment">/*新建视图*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p></p><h3><a name='header-n411' class='md-header-anchor '></a>3.18 序列 (Oracle独有)</h3><ul><li>序列用于产生一个有序的数，且这个数不会重复，即便两个线程同时访问，这个数也不会重复</li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> article </span></pre></div><pre class=""><span style="padding-right: 0.1px;">(</span></pre><pre class=""><span style="padding-right: 0.1px;">  id number,</span></pre><pre class=""><span style="padding-right: 0.1px;">  title varchar2(<span class="cm-number">1024</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">  cont <span class="cm-builtin">long</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> sequence seq;  <span class="cm-comment">/*创建名为seq的序列*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article(id, title, cont) <span class="cm-keyword">values</span>(seq<span class="cm-variable-2">.nextval</span>, <span class="cm-string">'a'</span>, <span class="cm-string">'b'</span>);  <span class="cm-comment">/*nextval为sequence的一个属性，表示下一个sequence的值，此时seq.nextval值为1*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article(id, title, cont) <span class="cm-keyword">values</span>(seq<span class="cm-variable-2">.nextval</span>, <span class="cm-string">'a'</span>, <span class="cm-string">'b'</span>);  <span class="cm-comment">/*此时seq.nextval值为2*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article(id, title, cont) <span class="cm-keyword">values</span>(seq<span class="cm-variable-2">.nextval</span>, <span class="cm-string">'a'</span>, <span class="cm-string">'b'</span>);  <span class="cm-comment">/*此时seq.nextval值为3*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> seq<span class="cm-variable-2">.nextval</span> <span class="cm-keyword">from</span> dual;  <span class="cm-comment">/*此时seq.nextval为4*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> seq<span class="cm-variable-2">.nextval</span> <span class="cm-keyword">from</span> dual;  <span class="cm-comment">/*此时seq.nextval为5*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> sequence seq;  <span class="cm-comment">/*删除序列*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><p></p><h2><a name='header-n419' class='md-header-anchor '></a>4. transaction 事务</h2><ul><li><p>对Oracle来说，一个transaction起始于第一条dml语句，结束于ddl语句和dcl语句</p></li><li><p>rollback可以回滚到整个transaction前</p><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">update</span> emp <span class="cm-keyword">set</span> sal = sal * <span class="cm-number">2</span>;  <span class="cm-comment">/*transaction开启*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> dept;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> salgrade(grade, losal, hisal) <span class="cm-keyword">values</span>(<span class="cm-number">6</span>, <span class="cm-number">10000</span>, <span class="cm-number">20000</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">rollback;  <span class="cm-comment">/*transaction结束，回滚到整个transaction之前，即回退到上面三条语句执行前*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">update</span> emp <span class="cm-keyword">set</span> sal = sal*<span class="cm-number">2</span>;  <span class="cm-comment">/*transaction开启*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">commit;  <span class="cm-comment">/*提交，此时transaction结束*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">rollback;  <span class="cm-comment">/*transaction已结束，无法回滚*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">update</span> dept <span class="cm-keyword">set</span> deptno = deptno * <span class="cm-number">2</span>;  <span class="cm-comment">/*transaction开启*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t (a varchar2(<span class="cm-number">20</span>));  <span class="cm-comment">/*transaction结束，并自动提交*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">rollback;  <span class="cm-comment">/*无法回滚*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre></li><li><p>当用户正常退出时，transaction自动提交；用户非正常断开连接时，transaction自动rollback</p></li></ul><p></p><h2><a name='header-n433' class='md-header-anchor '></a>5. 数据字典表</h2><ul><li>每个用户都有数据字典表，用于记录用户拥有的表、视图等的信息</li></ul><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> table_name <span class="cm-keyword">from</span> user_tables;  <span class="cm-comment">/*查询此用户所有表的表名*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> view_name <span class="cm-keyword">from</span> user_views;  <span class="cm-comment">/*查询此用户所有视图的视图名*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> constraint_name, table_name <span class="cm-keyword">from</span> user_constraints;  <span class="cm-comment">/*查询此用户所有约束的约束名，以及约束所在表的表名*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><ul><li><p>dictionary表用于记录Oracle数据库各数据字典表的信息</p><pre class="md-fences md-end-block" lang="sql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">desc</span> dictionary  <span class="cm-comment">/*dictionary表只有两个字段，TABLE_NAME(表名)和COMMENTS(这张表的描述)*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><blockquote><p>名称                                      是否为空? 类型
----------------------------------------- -------- ----------------------------
TABLE_NAME                                         VARCHAR2(30)
COMMENTS                                           VARCHAR2(4000)</p></blockquote></li></ul><p></p><h2><a name='header-n452' class='md-header-anchor '></a>6. 三范式</h2><ul><li><p>范式： 数据库设计的规则</p></li><li><p>三范式目标：不存在冗余数据</p></li><li><p>第一范式：要有主键，列不可分(能用字段表示就无需再分成两个字段)</p></li><li><p>第二范式：不存在部分依赖</p><ul><li>当一张表里有多个字段作为主键时，非主键的字段不依赖于非主键字段或者部分主键字段(只能依赖于所有主键的组合)，若非如此，需要将该表分割成多表</li></ul></li><li><p>第三范式：不存在传递依赖，不是主键的任何其他字段必须直接依赖于主键</p></li></ul><h2><a name='header-n474' class='md-header-anchor '></a>7. PL/SQL</h2><ul><li>PL/SQL是过程化SQL语言，带有分支和循环，是Oracle数据库对SQL语句的扩展，在普通SQL语句的使用上增加了编程语言的特点</li></ul><h3><a name='header-n480' class='md-header-anchor '></a>7.01 基本语法</h3><ul><li><p>PL/SQL是一种块结构的语言，这意味着PL/SQL程序被划分和编写代码的逻辑块。每块由三个子部分组成：</p><ul><li><p>声明：</p><p>此部分开头使用关键字DECLARE。它是一个可选的部分，并限定在该程序中使用的所有变量，游标，子程序，和其他元素。</p></li><li><p>可执行命令：</p><p>此部分是封闭关键字BEGIN和END，这是一个强制性的部分。它由程序的可执行文件的PL/SQL语句。它应具有至少一个可执行的代码行，这可能仅仅是一个空命令，以指示什么都不执行。</p></li><li><p>异常处理：</p><p>此部分开头使用关键字EXCEPTION。此部分又是可选的，含有异常，在程序处理错误中。</p></li></ul></li><li><p>HelloWorld示例：</p></li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-string-2">serveroutput</span> <span class="cm-keyword">on</span>;<span class="cm-tab">    </span><span class="cm-comment">/*内部环境变量serveroutput默认关闭，打开后才能output*/</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>message <span class="cm-builtin">varchar2</span>(<span class="cm-number">20</span>);<span class="cm-tab">   </span><span class="cm-comment">/*声明一个varchar2类型的变量message*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>message := <span class="cm-string">'HelloWorld!'</span>;<span class="cm-tab">   </span><span class="cm-comment">/*给变量message赋值*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'HelloWorld!'</span>);<span class="cm-tab">    </span><span class="cm-comment">/*打印一行数据*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><ul><li><p>exception示例：</p><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_num <span class="cm-builtin">number</span> := <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_num := <span class="cm-number">2</span>/v_num;<span class="cm-tab">   </span><span class="cm-comment">/*除数为0，会抛出异常*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(v_num);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">exception</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">when</span> <span class="cm-builtin">others</span> <span class="cm-keyword">then</span><span class="cm-tab">    </span><span class="cm-comment">/*当其他情况出现时*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'error'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre></li></ul><h3><a name='header-n511' class='md-header-anchor '></a>7.02 变量</h3><ul><li><p>变量的声明规则：</p><ul><li>变量名不能够使用保留字，如from、select等，<strong>推荐使用前缀 v_ 来给变量命名</strong></li><li>第一个字符必须是字母</li><li>变量名最多包含30个字符</li><li>不要与数据库的表或者列同名</li><li>每一行只能声明一个变量</li></ul></li><li><p>常用变量类型</p><ul><li>binary_integer  整数，主要用来计数而不是用来表示字段类型</li><li>number  数字类型</li><li>char  定长字符串</li><li>varchar2  变长字符串</li><li>date  日期</li><li>long  长字符串，最长2GB</li><li>boolean  布尔类型，可以取值为true、false和null值，dbms_output.put_line不能打印boolean类型的值</li></ul></li><li><p>例1：</p></li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp <span class="cm-builtin">number</span>(<span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_count <span class="cm-keyword">binary_integer</span> := <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_sal <span class="cm-builtin">number</span>(<span class="cm-number">7</span>, <span class="cm-number">2</span>) := <span class="cm-number">4000.00</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_date <span class="cm-keyword">date</span> := <span class="cm-builtin">sysdate</span>;<span class="cm-tab"> </span><span class="cm-comment">/*sysdate为当前日期*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_pi <span class="cm-keyword">constant</span> <span class="cm-builtin">number</span>(<span class="cm-number">3</span>, <span class="cm-number">2</span>) := <span class="cm-number">3.14</span>;<span class="cm-tab"> </span><span class="cm-comment">/*constant为常量，相当于java里的final*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_valid <span class="cm-keyword">boolean</span> := <span class="cm-atom">false</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_name <span class="cm-builtin">varchar2</span>(<span class="cm-number">20</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span> := <span class="cm-string">'MyName'</span>;<span class="cm-tab">   </span><span class="cm-comment">/*not null非空限制*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'v_temp value'</span> || v_temp);<span class="cm-tab"> </span><span class="cm-comment">/*||为连接符*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><p></p><h4><a name='header-n563' class='md-header-anchor '></a>使用%type属性：</h4><ul><li>为了使一个变量的数据类型与另一个已经定义了的变量（尤其是表的某一列）的数据类型相一致，<a href='http://lib.csdn.net/base/oracle'>Oracle</a>提供了%TYPE定义方式。当被参照的那个变量的数据类型改变了之后，这个新定义的变量的数据类型会自动跟随其改变，容易保持一致，也不用修改PL/SQL程序了。当不能确切地知道被参照的那个变量的数据类型时，就只能采用这种方法定义变量的数据类型。</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_empno <span class="cm-builtin">number</span>(<span class="cm-number">4</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_empno2 emp.empno%<span class="cm-keyword">type</span>;<span class="cm-tab">    </span><span class="cm-comment">/*表示v_empno2的类型为emp表的empno字段的类型*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_empno3 v_empno2%<span class="cm-keyword">type</span>;<span class="cm-tab"> </span><span class="cm-tab">    </span><span class="cm-comment">/*表示v_empno3的类型为v_empno2的类型*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p></p><h4><a name='header-n571' class='md-header-anchor '></a>Record(记录)类型</h4><ul><li>记录类型类似于C语言的结构体，它把逻辑相关的、分离的、基本数据类型的变量组成一个整体存储起来，它必须包括至少一个标量型或RECORD数据类型的成员，称作PL/SQL RECORD的域(FIELD)，其作用是存放互不相同但逻辑相关的信息。在使用记录数据类型变量时，需要先在声明部分先定义记录的组成、记录的变量，然后在执行部分引用该记录变量本身或其中的成员。 </li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">type</span> type_record_dept <span class="cm-keyword">is</span> <span class="cm-keyword">record</span><span class="cm-tab"> </span><span class="cm-comment">/*声明 type_record_dept 为record类型*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>(</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tab">  </span>deptno dept.deptno%<span class="cm-keyword">type</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dname dept.dname%<span class="cm-keyword">type</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>loc dept.loc%<span class="cm-keyword">type</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp type_record_dept;<span class="cm-tab">    </span><span class="cm-comment">/*声明v_temp为type_record_dept类型*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp.deptno := <span class="cm-number">50</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp.dname := <span class="cm-string">'aaaa'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(v_temp.deptno || <span class="cm-string">' '</span> || v_temp.dname);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><p></p><h4><a name='header-n579' class='md-header-anchor '></a>使用%rowtype声明record变量</h4><ul><li>为了使一个变量的数据类型与一个表中记录的各个列的数据类型相对应、一致，Oracle提供%ROWTYPE定义方式。当表的某些列的数据类型改变了之后，这个新定义的变量的数据类型会自动跟随其改变，容易保持一致，也不用修改PL/SQL程序了。当不能确切地知道被参照的那个表的结构及其数据类型时，就只能采用这种方法定义变量的数据类型。</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp dept%<span class="cm-builtin">rowtype</span>;<span class="cm-tab">    </span><span class="cm-comment">--声明一个recode变量v_temp，v_temp中的分量的变量名和类型与dept表中的相同</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp.deptno := <span class="cm-number">50</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp.dname := <span class="cm-string">'aaaa'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp.loc := <span class="cm-string">'bj'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(v_temp.deptno || <span class="cm-string">' '</span> || v_temp.dname);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p></p><h3><a name='header-n587' class='md-header-anchor '></a>7.03 PL/SQL块中SQL语句的运用</h3><h4><a name='header-n588' class='md-header-anchor '></a>DML语句</h4><ul><li><p>PL/SQL块中的select语句：</p><p>PL/SQL块中要使用select 语句，必须使用select into，并且选取结果只能有一行</p></li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_name emp.ename%<span class="cm-keyword">type</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_sal emp.sal%<span class="cm-keyword">type</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">select</span> ename, sal <span class="cm-keyword">into</span> v_name, v_sal <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> empno = <span class="cm-number">7369</span>;<span class="cm-tab">   </span><span class="cm-comment">--into是把取出来的ename和sal分别放到v_name和v_sal里面</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(v_name || <span class="cm-string">' '</span> || v_sal);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_emp emp%<span class="cm-builtin">rowtype</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">select</span> * <span class="cm-keyword">into</span> v_emp <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> empno = <span class="cm-number">7369</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(v_emp.ename);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p></p><ul><li>insert语句、update语句、delete语句在PL/SQL语句块中的用法没有变化，只是有可能会使用变量</li><li>insert语句：</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_deptno dept.deptno%<span class="cm-keyword">type</span> := <span class="cm-number">50</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_dname dept.dname%<span class="cm-keyword">type</span> := <span class="cm-string">'aaaa'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_loc dept.loc%<span class="cm-keyword">type</span> := <span class="cm-string">'bj'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> dept2 <span class="cm-keyword">values</span> (v_deptno, d_name, v_loc);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">commit</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><ul><li>update语句：</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_deptno emp2.deptno%<span class="cm-keyword">type</span> := <span class="cm-number">50</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_count <span class="cm-builtin">number</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">update</span> emp2 <span class="cm-keyword">set</span> sal = sal/2 <span class="cm-keyword">where</span> deptno = v_deptno;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.putline(<span class="cm-keyword">sql</span>%<span class="cm-builtin">rowcount</span> || <span class="cm-string">'条记录被影响'</span>);<span class="cm-tab">  </span><span class="cm-comment">--sql是一个关键字，代表刚才执行的这条语句，rowcount是sql的一个属性，记录刚才的语句影响的行数</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">commit</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p></p><h4><a name='header-n613' class='md-header-anchor '></a>DDL语句</h4><ul><li>PL/SQL块中不能直接发出DDL语句，使用DDL语句需要加上execute immediate(立即执行)，让DDL语句逃离开编译时Compile的检验过程</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-string-2">execute</span> <span class="cm-keyword">immediate</span> <span class="cm-string">'create table T(nnn varchar2(20) default ''aaa'')'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p></p><h3><a name='header-n621' class='md-header-anchor '></a>7.04 if 语句</h3><ul><li>if语句以 if 开头，end if 结束</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_sal emp.sal%<span class="cm-keyword">type</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">select</span> sal <span class="cm-keyword">into</span> v_sal <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> empno = <span class="cm-number">7369</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">if</span> (v_sal &lt; <span class="cm-number">1200</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'low'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">elsif</span> (v_sal &lt; <span class="cm-number">2000</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'middle'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">else</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'high'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p></p><h3><a name='header-n629' class='md-header-anchor '></a>7.05 循环</h3><ul><li>循环以loop开头，以end loop结束</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>i <span class="cm-keyword">binary_integer</span> := <span class="cm-number">1</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(i);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>i := i + <span class="cm-number">1</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">exit</span> <span class="cm-keyword">when</span>(i &gt; <span class="cm-number">11</span>);<span class="cm-tab">  </span><span class="cm-comment">--当i&gt;11时退出</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><ul><li>where循环</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>j <span class="cm-keyword">binary_integer</span> := <span class="cm-number">1</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">while</span> j &lt; <span class="cm-number">11</span> <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(j);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>j := j + <span class="cm-number">1</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><ul><li>for循环</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">for</span> k <span class="cm-keyword">in</span> <span class="cm-number">1</span>.<span class="cm-number">.10</span> <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(k);<span class="cm-tab">    </span><span class="cm-comment">--输出1到10</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">for</span> k <span class="cm-keyword">in</span> <span class="cm-keyword">reverse</span> <span class="cm-number">1</span>.<span class="cm-number">.10</span> <span class="cm-keyword">loop</span><span class="cm-tab"> </span><span class="cm-comment">--reverse的意思是逆序，即k是从10到1循环</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(k);<span class="cm-tab">    </span><span class="cm-comment">--输出10到1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p></p><h3><a name='header-n647' class='md-header-anchor '></a>7.06 错误处理</h3><ul><li>例：too_many_rows</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp <span class="cm-builtin">number</span>(<span class="cm-number">4</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">select</span> empno <span class="cm-keyword">into</span> v_temp <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> deptno = <span class="cm-number">10</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">exception</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">when</span> too_many_rows <span class="cm-keyword">then</span><span class="cm-tab"> </span><span class="cm-tab">    </span><span class="cm-comment">--too_many_row 实际返回行数大于请求行数</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'太多记录了'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">when</span> <span class="cm-builtin">others</span> <span class="cm-keyword">then</span><span class="cm-tab">    </span><span class="cm-comment">--当其他异常产生时</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'error'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><ul><li>例：no_data_found</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp <span class="cm-builtin">number</span>(<span class="cm-number">4</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">select</span> empno <span class="cm-keyword">into</span> v_temp <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> empno = <span class="cm-number">2222</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">exception</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">when</span> <span class="cm-builtin">no_data_found</span> <span class="cm-keyword">then</span><span class="cm-tab"> </span><span class="cm-tab">    </span><span class="cm-comment">--no_data_found 没找到数据</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(<span class="cm-string">'没数据'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><ul><li>处理错误的常用做法：</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> errorlog</span></pre></div><pre class=""><span style="padding-right: 0.1px;">(</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">number</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>errcode <span class="cm-builtin">number</span>,<span class="cm-tab"> </span><span class="cm-tab">    </span><span class="cm-comment">--错误代码</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>errmsg <span class="cm-builtin">varchar2</span>(<span class="cm-number">1024</span>),<span class="cm-tab">  </span><span class="cm-comment">--错误信息</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>errdate <span class="cm-keyword">date</span><span class="cm-tab">    </span><span class="cm-comment">--错误日期</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> sequence seq_errorlog_id <span class="cm-keyword">start</span> <span class="cm-keyword">with</span> <span class="cm-number">1</span> <span class="cm-keyword">increment</span> <span class="cm-keyword">by</span> <span class="cm-number">1</span>;<span class="cm-tab">    </span><span class="cm-comment">--创建一个序列seq_errorlog_id，从1开始，每次递增1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_deptno dept.deptno%<span class="cm-keyword">type</span> := <span class="cm-number">10</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_errcode <span class="cm-builtin">number</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_errmsg <span class="cm-builtin">varchar</span>(<span class="cm-number">1024</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> dept <span class="cm-keyword">where</span> deptno = v_deptno;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">commit</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">exception</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">when</span> <span class="cm-builtin">others</span> <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">rollback</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span>v_errcode := <span class="cm-builtin">SQLCODE</span>;<span class="cm-tab">   </span><span class="cm-comment">--SQLCODE关键字，代表出错代码</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span>v_errmsg := <span class="cm-builtin">SQLERRM</span>;<span class="cm-tab">    </span><span class="cm-comment">--SQLERRM关键字，代表出错信息</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> errorlog(id, errcode, errmsg, errdate) <span class="cm-keyword">values</span>(seq_errorlog_id.<span class="cm-builtin">nextval</span>, v_errcode, v_errmsg, <span class="cm-builtin">sysdate</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">commit</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 644px;"></div></div></div></pre><p></p><h3><a name='header-n665' class='md-header-anchor '></a>7.07 cursor游标</h3><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">cursor</span> c <span class="cm-keyword">is</span><span class="cm-tab"> </span><span class="cm-tab">    </span><span class="cm-comment">--声明游标c，指向select产生的结果集</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_emp c%<span class="cm-builtin">rowtype</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">open</span> c;<span class="cm-tab"> </span><span class="cm-comment">--打开游标c，只有打开游标后，才会执行声明游标时的select语句，把select产生的结果集放入内存</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">fetch</span> c <span class="cm-keyword">into</span> v_emp;<span class="cm-tab"> </span><span class="cm-comment">--把游标c当前指向的内容赋给v_emp</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(v_emp.ename);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">close</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><ul><li>简单循环遍历游标</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">cursor</span> c <span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_emp c%<span class="cm-builtin">rowtype</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">open</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">fetch</span> c <span class="cm-keyword">into</span> v_emp;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">exit</span> <span class="cm-keyword">when</span> (c%<span class="cm-builtin">notfound</span>);<span class="cm-tab"> </span><span class="cm-comment">--notfound为游标的一个属性，找不到记录则为true</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  dbms_output.put_line(v_emp.ename);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">close</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><ul><li>while循环遍历游标</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">cursor</span> c <span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_emp emp%<span class="cm-builtin">rowtype</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">open</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">fetch</span> c <span class="cm-keyword">into</span> v_emp;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">while</span>(c%<span class="cm-builtin">found</span>) <span class="cm-keyword">loop</span><span class="cm-tab"> </span><span class="cm-comment">--found为游标的一个属性，有记录则为true</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(v_emp.ename);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">fetch</span> c <span class="cm-keyword">into</span> v_emp;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">close</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><ul><li>for循环</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">cursor</span> c(v_deptno emp.deptno%<span class="cm-keyword">type</span>, v_job emp.job%<span class="cm-keyword">type</span>)<span class="cm-tab">  </span><span class="cm-comment">--给了两个形参</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">is</span> </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">select</span> ename, sal <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> deptno = v_deptno <span class="cm-keyword">and</span> job = v_job;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">for</span> v_temp <span class="cm-keyword">in</span> c(<span class="cm-number">30</span>, <span class="cm-string">'CLERK'</span>) <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(v_temp.ename);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><ul><li>可更新的游标</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">cursor</span> c</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp2 <span class="cm-keyword">for</span> <span class="cm-keyword">update</span>;<span class="cm-tab">  </span><span class="cm-comment">--for update 为了更新才使用的游标</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">for</span> v_temp <span class="cm-keyword">in</span> c <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">if</span> (v_temp.sal &lt; <span class="cm-number">2000</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">update</span> emp2 <span class="cm-keyword">set</span> sal = sal * <span class="cm-number">2</span> <span class="cm-keyword">where</span> <span class="cm-keyword">current</span> <span class="cm-keyword">of</span> c;<span class="cm-tab">   </span><span class="cm-comment">--current of c 游标当前指向的内容</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">elsif</span> (v_temp.sal = <span class="cm-number">5000</span>) <span class="cm-keyword">then</span><span class="cm-tab">  </span><span class="cm-comment">--注意：判断是否相等使用 = 而不是 ==</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> emp2 <span class="cm-keyword">where</span> <span class="cm-keyword">current</span> <span class="cm-keyword">of</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">commit</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><p></p><h3><a name='header-n689' class='md-header-anchor '></a>7.08 存储过程procedure</h3><ul><li>创建存储过程</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">procedure</span> p<span class="cm-tab">   </span><span class="cm-comment">--创建或替换(如果没有则创建，有则替换)存储过程p</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">cursor</span> c <span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp2 <span class="cm-keyword">for</span> <span class="cm-keyword">update</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">for</span> v_emp <span class="cm-keyword">in</span> c <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">if</span>(v_emp.deptno = <span class="cm-number">10</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">update</span> emp2 <span class="cm-keyword">set</span> sal = sal + <span class="cm-number">10</span> <span class="cm-keyword">where</span> <span class="cm-keyword">current</span> <span class="cm-keyword">of</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">elsif</span> (v_emp.deptno = <span class="cm-number">20</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">update</span> emp2 <span class="cm-keyword">set</span> sal = sal + <span class="cm-number">20</span> <span class="cm-keyword">where</span> <span class="cm-keyword">current</span> <span class="cm-keyword">of</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">else</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">update</span> emp2 <span class="cm-keyword">set</span> sal = sal + <span class="cm-number">50</span> <span class="cm-keyword">where</span> <span class="cm-keyword">current</span> <span class="cm-keyword">of</span> c;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">commit</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><ul><li>执行存储过程</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string-2">exec</span> p;<span class="cm-tab"> </span><span class="cm-comment">--执行存储过程p</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>​	或：</p><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>p;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><ul><li><p>带参数的存储过程</p><ul><li>in 传入参数：由调用环境传入给存储过程的参数，<strong>默认为 in</strong></li><li>out 传出参数：由存储过程传出给调用环境的参数</li><li>in out 即传入又传出</li></ul><p>创建带参数存储过程：</p></li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">procedure</span> p</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>(v_a <span class="cm-keyword">in</span> <span class="cm-builtin">number</span>, v_b <span class="cm-builtin">number</span>, v_ret <span class="cm-keyword">out</span> <span class="cm-builtin">number</span>, v_temp <span class="cm-keyword">in</span> <span class="cm-keyword">out</span> <span class="cm-builtin">number</span>)<span class="cm-tab"> </span><span class="cm-comment">--v_a为传入参数，v_b为传入参数，v_ret为传出参数，v_temp为即传入又传出参数</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">if</span>(v_a &gt; v_b) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>v_ret := v_a;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">else</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>v_ret := v_b;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp := v_temp + <span class="cm-number">1</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p>​	上述带参数存储过程的执行：</p><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">declare</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_a <span class="cm-builtin">number</span> := <span class="cm-number">3</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_b <span class="cm-builtin">number</span> := <span class="cm-number">4</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_ret <span class="cm-builtin">number</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_temp <span class="cm-builtin">number</span> := <span class="cm-number">5</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>p(v_a, v_b, v_ret, v_temp);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(v_ret);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dbms_output.put_line(v_temp);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><ul><li>删除存储过程</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">procedure</span> p;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p></p><h3><a name='header-n730' class='md-header-anchor '></a>7.09 函数function</h3><ul><li>创建函数</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">function</span> sal_tax</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>(v_sal <span class="cm-builtin">number</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-builtin">number</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">if</span>(v_sal &lt; <span class="cm-number">2000</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-number">0.10</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">elsif</span>(v_sal &lt; <span class="cm-number">2750</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-number">0.15</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">else</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-number">0.20</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><ul><li>函数的使用</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-builtin">lower</span>(ename), sal_tax(sal) <span class="cm-keyword">from</span> emp;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p></p><h3><a name='header-n743' class='md-header-anchor '></a>7.10 触发器 trigger</h3><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">--创建表emp2_log</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> emp2_log</span></pre><pre class=""><span style="padding-right: 0.1px;">(</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>uname <span class="cm-builtin">varchar2</span>(<span class="cm-number">20</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>action <span class="cm-builtin">varchar2</span>(<span class="cm-number">10</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>atime <span class="cm-keyword">date</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">--创建触发器trig</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">trigger</span> trig</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>after <span class="cm-keyword">insert</span> <span class="cm-keyword">or</span> <span class="cm-keyword">delete</span> <span class="cm-keyword">or</span> <span class="cm-keyword">update</span> <span class="cm-keyword">on</span> emp2<span class="cm-tab">    </span><span class="cm-comment">--指定触发器trig触发的时机，after是在insert、delete、update操作之后触发，如果写begin，则是在操作前触发</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">if</span> inserting <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp2_log <span class="cm-keyword">values</span>(<span class="cm-builtin">USER</span>, <span class="cm-string">'insert'</span>, <span class="cm-builtin">sysdate</span>);<span class="cm-tab">   </span><span class="cm-comment">--USER关键字，代表当前用户用户名</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">elsif</span> updating <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp2_log <span class="cm-keyword">values</span>(<span class="cm-builtin">USER</span>, <span class="cm-string">'update'</span>, <span class="cm-builtin">sysdate</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">elsif</span> deleting <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp2_log <span class="cm-keyword">values</span>(<span class="cm-builtin">USER</span>, <span class="cm-string">'delete'</span>, <span class="cm-builtin">sysdate</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 506px;"></div></div></div></pre><p></p><h3><a name='header-n747' class='md-header-anchor '></a>7.11 树状结构的存储与展示</h3><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> article</span></pre></div><pre class=""><span style="padding-right: 0.1px;">(</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">number</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>cont <span class="cm-builtin">varchar2</span>(<span class="cm-number">4000</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>pid <span class="cm-builtin">number</span>,<span class="cm-tab"> </span><span class="cm-comment">--父id</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>isleaf <span class="cm-builtin">number</span>(<span class="cm-number">1</span>),<span class="cm-tab">   </span><span class="cm-comment">--0代表非叶子节点，1代表叶子节点</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span>alevel <span class="cm-builtin">number</span>(<span class="cm-number">2</span>)<span class="cm-tab">    </span><span class="cm-comment">--代表树状结构第几层</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">1</span>, <span class="cm-string">'蚂蚁大战大象'</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">2</span>, <span class="cm-string">'大象被打趴下了'</span>, <span class="cm-number">1</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">3</span>, <span class="cm-string">'蚂蚁也不好过'</span>, <span class="cm-number">2</span>, <span class="cm-number">1</span>, <span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">4</span>, <span class="cm-string">'瞎说'</span>, <span class="cm-number">2</span>, <span class="cm-number">0</span>, <span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">5</span>, <span class="cm-string">'没有瞎说'</span>, <span class="cm-number">4</span>, <span class="cm-number">1</span>, <span class="cm-number">3</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">6</span>, <span class="cm-string">'怎么可能'</span>, <span class="cm-number">1</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">7</span>, <span class="cm-string">'怎么没可能'</span>, <span class="cm-number">6</span>, <span class="cm-number">1</span>, <span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">8</span>, <span class="cm-string">'可能性是很大的'</span>, <span class="cm-number">6</span>, <span class="cm-number">1</span>, <span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">9</span>, <span class="cm-string">'大象进医院了'</span>, <span class="cm-number">2</span>, <span class="cm-number">0</span>, <span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> article <span class="cm-keyword">values</span> (<span class="cm-number">10</span>, <span class="cm-string">'护士是蚂蚁'</span>, <span class="cm-number">9</span>, <span class="cm-number">1</span>, <span class="cm-number">3</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">commit</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 460px;"></div></div></div></pre><blockquote><p>蚂蚁大战大象</p><p>​	大象被打趴下了</p><p>​		蚂蚁也不好过</p><p>​		瞎说</p><p>​			没有瞎说</p><p>​		大象进医院了</p><p>​			护士是蚂蚁</p><p>​	怎么可能</p><p>​		怎么不可能</p><p>​		可能性是很大的</p></blockquote><ul><li>创建存储过程来展示树状结构</li></ul><pre class="md-fences md-end-block" lang="plsql"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">procedure</span> p (v_pid article.pid%<span class="cm-keyword">type</span>, v_level <span class="cm-keyword">binary_integer</span>)</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">cursor</span> c <span class="cm-keyword">is</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> article <span class="cm-keyword">where</span> pid = v_pid;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>v_preStr <span class="cm-builtin">varchar2</span>(<span class="cm-number">1024</span>) := <span class="cm-string">''</span>;<span class="cm-tab">  </span><span class="cm-comment">--用于打印*显示缩进效果</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">for</span> i <span class="cm-keyword">in</span> <span class="cm-number">0</span>..v_level <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>v_preStr := v_preStr || <span class="cm-string">'****'</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">for</span> v_article <span class="cm-keyword">in</span> c <span class="cm-keyword">loop</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>dbms_output.put_line(v_preStr || v_article.cont);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">if</span>(v_article.isleaf = <span class="cm-number">0</span>) <span class="cm-keyword">then</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span>p (v_article.id, v_level + <span class="cm-number">1</span>);<span class="cm-tab">  </span><span class="cm-comment">--递归调用</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">end</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">/</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string-2">exec</span> p(<span class="cm-number">0</span>, <span class="cm-number">0</span>);<span class="cm-tab">   </span><span class="cm-comment">--执行存储过程</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 437px;"></div></div></div></pre><p></p></div>
</body>
</html>